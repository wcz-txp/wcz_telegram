# Name: wcz_telegram v0.11 
# Type: Admin/AJAX plugin
# A simple plugin to post articles to Telegram
# Author: whocarez
# URL: https://github.com/wcz-txp/wcz_telegram
# Recommended load order: 5

# .....................................................................
# This is a plugin for Textpattern CMS - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# .....................................................................

YToxMTp7czo0OiJuYW1lIjtzOjEyOiJ3Y3pfdGVsZWdyYW0iO3M6NjoiYXV0aG9yIjtzOjg6
Indob2NhcmV6IjtzOjEwOiJhdXRob3JfdXJpIjtzOjM5OiJodHRwczovL2dpdGh1Yi5jb20v
d2N6LXR4cC93Y3pfdGVsZWdyYW0iO3M6NzoidmVyc2lvbiI7czo0OiIwLjExIjtzOjExOiJk
ZXNjcmlwdGlvbiI7czo0NDoiQSBzaW1wbGUgcGx1Z2luIHRvIHBvc3QgYXJ0aWNsZXMgdG8g
VGVsZWdyYW0iO3M6NDoiY29kZSI7czozODg0OiIvKg0KUGFydGx5IGluc3BpcmVkIGJ5IEFu
ZHkgQ2FydGVyJ3MgYXJjX3R3aXR0ZXINCmh0dHA6Ly9hbmR5LWNhcnRlci5jb20vdHhwL2Fy
Y190d2l0dGVyDQoqLw0KDQppZiAodHhwaW50ZXJmYWNlID09ICdhZG1pbicpDQp7DQogICAg
YWRkX3ByaXZzKCd3Y3pfdGVsZWdyYW1fcG9zdCcsICcxJyk7DQoNCiAgICByZWdpc3Rlcl9j
YWxsYmFjaygnd2N6X3RlbGVncmFtJywgJ2FydGljbGUnLCAnZWRpdCcpOw0KDQogICAgcmVn
aXN0ZXJfY2FsbGJhY2soJ3djel90ZWxlZ3JhbV91aScsICdhcnRpY2xlX3VpJywgJ3N0YXR1
cycpOw0KDQp9DQoNCi8vIFJlZ2lzdGVyIHRhZ3MuDQpUeHA6OmdldCgnXFRleHRwYXR0ZXJu
XFRhZ1xSZWdpc3RyeScpDQogICAgLT5yZWdpc3Rlcignd2N6X3RlbGVncmFtJyk7DQoNCg0K
DQoNCmZ1bmN0aW9uIHdjel90ZWxlZ3JhbV91aSgkZXZlbnQsICRzdGVwLCAkZGF0YSwgJHJz
MSkgew0KDQogICAgJHZhciA9IGdwcygnd2N6X3RlbGVncmFtX190aGlzJyk7DQogICAgJGNv
bnRlbnQgID0gdGFnKHllc25vUmFkaW8oJ3djel90ZWxlZ3JhbV9fdGhpcycsICcwJywgJycs
ICd3Y3pfdGVsZWdyYW1fX3RoaXMnKSwncCcpOw0KICAgIHJldHVybiAkZGF0YS5maWVsZHNl
dCgkY29udGVudCwgJ1NlbmQgdG8gVGVsZWdyYW0nLCAnd2N6X3RlbGVncmFtJyk7DQoNCn0N
Cg0KDQoNCg0KZnVuY3Rpb24gd2N6X3RlbGVncmFtKCkgew0KDQoNCiAgICAkYXJ0aWNsZV9p
ZCA9IGVtcHR5KCRHTE9CQUxTWydJRCddKSA/IGdwcygnSUQnKSA6ICRHTE9CQUxTWydJRCdd
Ow0KICAgICRTdGF0dXMgPSBlbXB0eSgkR0xPQkFMU1snU3RhdHVzJ10pID8gZ3BzKCdTdGF0
dXMnKSA6ICRHTE9CQUxTWydTdGF0dXMnXTsNCiAgICAkdmlldyA9IGVtcHR5KCRHTE9CQUxT
Wyd2aWV3J10pID8gZ3BzKCd2aWV3JykgOiAkR0xPQkFMU1sndmlldyddOw0KICAgICR3Y3pf
dGVsZWdyYW1fX3RoaXMgPSBlbXB0eSgkR0xPQkFMU1snd2N6X3RlbGVncmFtX190aGlzJ10p
ID8gZ3BzKCd3Y3pfdGVsZWdyYW1fX3RoaXMnKSA6ICRHTE9CQUxTWyd3Y3pfdGVsZWdyYW1f
X3RoaXMnXTsNCg0KICAgIGlmICgkU3RhdHVzID09IDQgYW5kICR3Y3pfdGVsZWdyYW1fX3Ro
aXMgPT0gMSBhbmQgJHZpZXcgIT0gImh0bWwiIGFuZCAkdmlldyAhPSAicHJldmlldyIpDQog
ICAgew0KDQoNCglpZiAoIWVtcHR5KCRhcnRpY2xlX2lkKSkgDQoJew0KDQoJICAgIGluY2x1
ZGVfb25jZSB0eHBhdGguJy9wdWJsaXNoL3RhZ2hhbmRsZXJzLnBocCc7DQoNCgkgICAgJGFy
dGljbGUgPSBzYWZlX3JvdygiSUQsIFBvc3RlZCwgTGFzdE1vZCwgVGl0bGUsIEV4Y2VycHQs
IEtleXdvcmRzLCBTdGF0dXMiLCAndGV4dHBhdHRlcm4nLCJJRD17JGFydGljbGVfaWR9Iik7
DQoJfQ0KDQoNCgkkYXJ0aWNsZV91cmwgPSBwZXJtbGlua3VybCgkYXJ0aWNsZSk7DQoJJHRp
dGxlID0gJGFydGljbGVbJ1RpdGxlJ107DQoJJGV4Y2VycHQgPSAkYXJ0aWNsZVsnRXhjZXJw
dCddOw0KCSRrZXl3b3JkcyA9ICRhcnRpY2xlWydLZXl3b3JkcyddOw0KDQovLyB0aGUgdG9r
ZW4gb2YgeW91ciBUZWxlZ3JhbSBib3QNCgkkd2N6X3RlbGVncmFtX3Rva2VuID0gJyc7DQoN
Ci8vIHRoZSBjaGF0aWQgb2YgeW91ciBUZWxlZ3JhbSBjaGFubmVsDQoJJHdjel90ZWxlZ3Jh
bV9jaGF0aWQgPSAnJzsNCg0KLy8gSWYgeW91IGhhdmUgYWxyZWFkeSBhIFRlbGVncmFtIElu
c3RhbnQgVmlldyB0ZW1wbGF0ZSAoaHR0cHM6Ly9pbnN0YW50dmlldy50ZWxlZ3JhbS5vcmcv
I3B1Ymxpc2hpbmctdGVtcGxhdGVzKSwgYnV0IHRoaXMgaXMgbm90IHJlYWxseSBwdWJsaWMN
Ci8vIHlvdSBzaG91bGQgY29uc2lkZXIgdG8gdXNlIHRoaXMgb3B0aW9uLiBTZXQgaXQgdG8g
JzEnIGFuZCBjb3B5IHRoZSByaGFzaCwgc28gVGVsZWdyYW0gdXNlcnMgd2lsbCBzZWUgeW91
ciBhcnRpY2xlIG9uIHRoZWlyIG1vYmlsZXMNCi8vIGluc2lkZSBUZWxlZ3JhbSByZW5kZXJl
ZCB3aXRoIHlvdXIgdGVtcGxhdGUuDQoJJHdjel90ZWxlZ3JhbV9pdiA9ICcwJzsNCgkkd2N6
X3RlbGVncmFtX3JoYXNoID0gJyc7DQoNCi8vIElmIHNvbWV0aGluZyBkb2Vzbid0IHdvcmss
IHN3aXRjaCBpdCB0byAnMScgYW5kIHlvdSdsbCBnZXQgdGhlIGNvbXBsZXRlIHJlcXVlc3Qg
aW5zaWRlIG9mIHRleHRwYXR0ZXJuL3RtcC90ZWxlZ3JhbV9yZXF1ZXN0LnR4dA0KCSR3Y3pf
dGVsZWdyYW1fZGVidWcgPSAnMCc7DQoNCglpZiAoJHdjel90ZWxlZ3JhbV9pdiA9PSAnMScp
IA0KCXsNCgkgICAgJGFydGljbGVfdXJsID0gImh0dHBzOi8vdC5tZS9pdj91cmw9Ii4kYXJ0
aWNsZV91cmwuIiZyaGFzaD0iLiR3Y3pfdGVsZWdyYW1fcmhhc2g7DQoJfQ0KDQoNCi8vICBl
c2NhcGUgTWFya2Rvd24gZm9ybWF0dGluZyBjaGFyYWN0ZXIgIl8iDQoJJGFydGljbGVfdXJs
ID0gc3RyX3JlcGxhY2UoIl8iLCJcXyIsJGFydGljbGVfdXJsKTsNCg0KLy8gIHByZXBhcmUg
a2V5d29yZHMNCgkka2V5d29yZHMgPSBleHBsb2RlKCIsIiwka2V5d29yZHMpOw0KCWZvcmVh
Y2ggKCRrZXl3b3JkcyBhcyAmJGtleXdvcmQpIA0KCXsNCgkgICAgJGtleXdvcmQgPSBwcmVn
X3JlcGxhY2UoJy9ccysvJywgJycsbWJfY29udmVydF9jYXNlKCRrZXl3b3JkLCBNQl9DQVNF
X1RJVExFKSk7DQoJfQ0KDQoJJGtleXdvcmRzID0gaW1wbG9kZSgiICIscHJlZ19maWx0ZXIo
Jy9eLycsICcjJywgJGtleXdvcmRzKSk7DQoNCi8vIDQwOTYgY2hhcmFjdGVycyBpcyB0aGUg
bWF4aW11bSBwb3N0IGxlbmd0aA0KDQoJJGV4Y2VycHRsZW4gPSA0MDgwIC0gc3RybGVuKCR0
aXRsZSkgLSBzdHJsZW4oJGtleXdvcmRzKSAtIHN0cmxlbigkYXJ0aWNsZV91cmwpOw0KDQoJ
aWYgKHN0cmxlbigkZXhjZXJwdCkgPiAkZXhjZXJwdGxlbikgDQoJew0KCSAgICAkcG9zPXN0
cnBvcygkZXhjZXJwdCwgJyAnLCAkZXhjZXJwdGxlbik7DQoJICAgICRleGNlcnB0ID0gJyIn
LnN1YnN0cigkZXhjZXJwdCwwLCRwb3MpLiciIC4uLic7DQoJfQ0KDQoJJG1lc3NhZ2UgPSAi
KiIuJHRpdGxlLiIqXG5cbiIuJGV4Y2VycHQuIlxuXG4iLiRrZXl3b3Jkcy4iXG5cbiIuJGFy
dGljbGVfdXJsOw0KDQoJJHVybCA9ICdodHRwczovL2FwaS50ZWxlZ3JhbS5vcmcvYm90Jy4k
d2N6X3RlbGVncmFtX3Rva2VuLicvc2VuZE1lc3NhZ2U/Y2hhdF9pZD0nLiR3Y3pfdGVsZWdy
YW1fY2hhdGlkLicmcGFyc2VfbW9kZT1NYXJrZG93biZ0ZXh0PSc7DQoJJHVybCAuPSB1cmxl
bmNvZGUoJG1lc3NhZ2UpOw0KDQoNCi8vIHNvbWUgZGVidWcgc3R1ZmYNCglpZiAoJHdjel90
ZWxlZ3JhbV9kZWJ1ZyA9PSAiMSIpIA0KCXsNCgkgICAgZmlsZV9wdXRfY29udGVudHModHhw
YXRoLiIvdG1wL3RlbGVncmFtX3JlcXVlc3QudHh0IiwiU2VudCBVUkw6IFxuIi4kdXJsLiJc
blxuUHJlcGFyZWQgbWVzc2FnZTpcbiIuJG1lc3NhZ2UuIlxuXG5FeGNlcnB0IGxlbmd0aDpc
biIuJGV4Y2VycHRsZW4uIlxuXG5DdXJsIG91dHB1dDpcbiIpOw0KCX0NCg0KDQoJJGNoID0g
Y3VybF9pbml0KCk7DQoJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VSTCwgJHVybCk7DQoJ
Y3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1JFVFVSTlRSQU5TRkVSLCB0cnVlKTsNCi8vIHNv
bWUgZGVidWcgc3R1ZmYNCglpZiAoJHdjel90ZWxlZ3JhbV9kZWJ1ZyA9PSAiMSIpIA0KCXsN
CgkgICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1ZFUkJPU0UsIHRydWUpOw0KCSAgICAk
Y3VybF92ZXJib3NlID0gZm9wZW4odHhwYXRoLicvdG1wL3RlbGVncmFtX3JlcXVlc3QudHh0
JywgJ2ErJyk7DQoJICAgIGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9TVERFUlIsICRjdXJs
X3ZlcmJvc2UpOw0KCX0NCg0KCSRyZXNwb25zZSA9IGN1cmxfZXhlYygkY2gpOw0KCWN1cmxf
Y2xvc2UoJGNoKTsNCg0KICAgIH0NCn0NCiI7czo0OiJ0eXBlIjtzOjE6IjQiO3M6NToib3Jk
ZXIiO3M6MToiNSI7czo1OiJmbGFncyI7czoxOiIwIjtzOjQ6ImhlbHAiO3M6NzQ2OiJBIHJl
YWxseSByYXcgcGx1Z2luIGZvciBhdXRvbWF0aWMgcG9zdGluZyBuZXcgYXJ0aWNsZXMgdG8g
dGVsZWdyYW0uIEFsbCB0aGUgcGFyYW1ldGVycyBhcmUgeWV0IGluc2lkZSB0aGUgY29kZS4K
CiogKndjel90ZWxlZ3JhbV90b2tlbio6IHRoZSB0b2tlbiBvZiB5b3VyIFRlbGVncmFtIGJv
dAoqICp3Y3pfdGVsZWdyYW1fY2hhdGlkKjogdGhlIGNoYXRpZCBvZiB5b3VyIFRlbGVncmFt
IGNoYW5uZWwKKiAqd2N6X3RlbGVncmFtX2l2KiBhbmQgKndjel90ZWxlZ3JhbV9yaGFzaCo6
IElmIHlvdSBoYXZlIGFscmVhZHkgYSAiKlRlbGVncmFtIEluc3RhbnQgVmlldyB0ZW1wbGF0
ZSoiOmh0dHBzOi8vaW5zdGFudHZpZXcudGVsZWdyYW0ub3JnLyNwdWJsaXNoaW5nLXRlbXBs
YXRlcywgYnV0IHRoaXMgaXMgbm90IHJlYWxseSBwdWJsaWMgeW91IHNob3VsZCBjb25zaWRl
ciB0byB1c2UgdGhpcyBvcHRpb24uIFNldCBpdCB0byAnMScgYW5kIGNvcHkgdGhlIHJoYXNo
LCBzbyBUZWxlZ3JhbSB1c2VycyB3aWxsIHNlZSB5b3VyIGFydGljbGUgb24gdGhlaXIgbW9i
aWxlcyBpbnNpZGUgVGVsZWdyYW0gcmVuZGVyZWQgd2l0aCB5b3VyIHRlbXBsYXRlLgoqICp3
Y3pfdGVsZWdyYW1fZGVidWcqOiBJZiBzb21ldGhpbmcgZG9lc24ndCB3b3JrLCBzd2l0Y2gg
aXQgdG8gJzEnIGFuZCB5b3UnbGwgZ2V0IHRoZSBjb21wbGV0ZSByZXF1ZXN0IGluc2lkZSBv
ZiBAdGV4dHBhdHRlcm4vdG1wL3RlbGVncmFtX3JlcXVlc3QudHh0QCI7czozOiJtZDUiO3M6
MzI6ImEzMWIxYzU3MjJmNGE1OTc1MzU2OGYwYThjM2RiZDQzIjt9
